<body>
    <section class="container">
        <img src="logo_noizz.png" alt="Logo" class="logo">
        <h2><strong>Regístrate en Noizz</strong></h2>
        <form (ngSubmit)="onSubmit()">
            <label for="email">Dirección de correo electrónico</label>
            <input type="email" id="email" [(ngModel)]="credentials.correo" name="email" placeholder="Correo electrónico" required (input)="onPasswordChange()">
            <div *ngIf="credentials.correo && !credentials.correo.includes('@')" class="error">
                La dirección de correo electrónico es inválida.
            </div>
            <div *ngIf="correoError" class="error">
                {{ correoError }}
            </div>

            <label for="email">Nombre de usuario</label>
            <input type="text" id="nombreUsuario" [(ngModel)]="credentials.nombreUsuario" name="nombreUsuario" placeholder="Nombre de usuario" required (input)="onPasswordChange()" >
            <div *ngIf="credentials.nombreUsuario.includes('@')" class="error">
                No se permite el carácter "&#64;" en el nombre de usuario.
            </div>
            <div *ngIf="credentials.nombreUsuario.includes(' ')" class="error">
                El nombre de usuario no puede contener espacios.
            </div>
            <div *ngIf="credentials.nombreUsuario.includes(',')" class="error">
                El nombre de usuario no puede contener el carácter ",".
            </div>
            <div *ngIf="nombreError" class="error">
                {{ nombreError }}
            </div>

            
            <label for="password">Contraseña</label>
            <div class="password-container">
                <input [type]="isPasswordVisible ? 'text' : 'password'" 
                    id="password" [(ngModel)]="credentials.contrasenya" 
                    name="password" placeholder="Contraseña" required 
                    (input)="onPasswordChange()" />
                <i [ngClass]="isPasswordVisible ? 'fas fa-eye' : 'fas fa-eye-slash'" 
                    (click)="togglePassword()" class="toggle-password"></i>
            </div>
    
            <div class="password-requirements">               
                <div>
                    <i class="fas" [ngClass]="isLetterValid ? 'fa-check' : 'fa-times'"></i>
                    Debe contener letras
                </div>
                <div>
                    <i class="fas" [ngClass]="isNumberValid ? 'fa-check' : 'fa-times'"></i>
                    Debe contener un número o carácter especial
                </div>
                <div>
                    <i class="fas" [ngClass]="isLengthValid ? 'fa-check' : 'fa-times'"></i>
                    Mínimo 10 caracteres
                </div>
            </div>

            <div *ngIf="errorMessage" class="error">
                {{ errorMessage }}
            </div>
            
            <button type="submit" class="btn" [disabled]="!isFormValid">Registrarse</button>
        </form>
        <a [routerLink]="['/login']">¿Ya tienes una cuenta? <strong>Inicia sesión aquí</strong></a>
    </section>
</body>
